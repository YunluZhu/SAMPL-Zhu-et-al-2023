# Introduction
The VF analysis package reads LabView .dlm files generated by free swimming vertical fish apparatus (preprocessing), extracts and analyzes bouts (grab_fish_angle), and make figures (visualization).
For the current version (v0.1.0608), users need to run vf_analysis_cli.py or vf_analysis_by_folder_cli.py to analyze .dlm files and run individual visualization scripts to make figures. For more details, see the instructions section.

## Prerequisites
1. The use of conda environment is recommended. Download miniconda here: https://docs.conda.io/en/latest/miniconda.html 
2. To get packages required for running the code, try loading the environment.yml file. If it failes, just create a new environment and install packages required according to the .yml file.
3. Setting up conda envs may be tricky. Be patient and google a lot.
4. Visual Studio Code is a good IDE and is compatible with Jupyter Notebook

## Quick Start Guide
1. Get the root directory of .dlm files and run vf_analysis_by_folder_cli.py. It will go through all subfolders, find .dlm files, call the 2 functions in preprocessing, save analyzed results in .dlm folders.
    - alternatively, you may run the vf_analysis_cli.py which only analyzes .dlm files under the given directory.
    - for both scripts, .dlm files with the same path (under the same folder) will be analyzed together. Results from all the .dlm files will be concatenated.
2. Run visualization scripts to make figures. 
    - for the current version, all visualization scripts take one root directory with all analyzed data, which should be same as the one fed to the cli.py
    - jackknife, instead of bootstrap, is used for statistical analyses.

## Other Instructions
1. Jupyter Notebooks
    - two jupyter notebooks are included. Although they are early version code, not much has been changed in the Python script versions. 
    - these notebooks are well annotated with step-by-step instructions and additional code.
    - Analyze_VF includes all preprocessing code
    - Grab_Bouts includes grab_fish_angle code
2. The grab fish angle code 
    - it was originally written by DEE. This code extracts lots of data but most of which are not used in visualization.
    - the Python version saves variables into dataframe-like structures instead of individual lists
    - some variables may be calculated incorrectly (for example: heading), to be fixed.
3. Future changes
    - data type. Currently, results are saved as pickle files. To be changed to hd5.
    - more visualization code will be added.
    - visualization scripts will be callable.